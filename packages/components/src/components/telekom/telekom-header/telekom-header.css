/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

@import url('../../../global/custom-media.css');

:host {
  --shadow: 0px 2px 9px rgba(0, 0, 0, 0.15);
  --background: var(--telekom-color-background-canvas);
  --background-logo: var(--telekom-color-primary-standard);
  --transition: height var(--telekom-motion-duration-immediate)
      var(--telekom-motion-easing-standard),
    width var(--telekom-motion-duration-immediate)
      var(--telekom-motion-easing-standard),
    margin-right var(--telekom-motion-duration-immediate)
      var(--telekom-motion-easing-standard);
  --font-size-app-name: var(--telekom-typography-font-size-small);
  --line-height-app-name: var(--telekom-typography-line-spacing-tight);
  --font-weight-app-name: var(--telekom-typography-font-weight-extra-bold);

  --_height: 60px;
  --_height-logo: 36px;
  --_height-bottom-bar: 60px;
  --_height-top-bar: 0;

  --_display-bottom-app-name: none;
  --_display-top-app-name: none;
  --_display-main-nav: none;
  --_display-meta-nav: none;
  --_display-meta-nav-external: none;
  --_display-lang-switcher: none;

  --_spacing-x: 0 16px 0 0;
  --_spacing-left-body: 0;
  --_spacing-right-top-app-name: 32px;
  --_spacing-right-bottom-app-name: 32px;

  --_base-menu-justify-content: end;

  /* TODO make sure we want to "expose" variables this way */
  --scl-telekom-header-container-spacing-x: var(--_spacing-x);
}

@media screen and (--md) {
  :host {
    --_display-bottom-app-name: block;
    --_spacing-x: 0 16px;
    --_spacing-left-body: 32px;
  }
}

@media screen and (--lg) {
  :host,
  :host::part(scrolled-back) {
    --_height: 84px;
    --_height-logo: 44px;
    --_height-top-bar: 30px;
    --_height-bottom-bar: 54px;

    --_display-main-nav: block;
    --_display-meta-nav: block;
    --_display-meta-nav-external: block;
    --_display-lang-switcher: block;
    --_display-top-app-name: block;
    --_display-bottom-app-name: none;

    --_spacing-x: 0 24px;
    --_spacing-left-body: 44px;
    --_spacing-right-bottom-app-name: 0;

    --_base-menu-justify-content: space-between;
  }
  :host::part(scrolled) {
    --_height: 72px;
    --_height-logo: 40px;
    --_height-top-bar: 0;
    --_height-bottom-bar: 72px;

    --_display-meta-nav: none;
    --_display-meta-nav-external: none;
    --_display-lang-switcher: none;
    --_display-top-app-name: none;
    --_display-bottom-app-name: block;

    --_spacing-right-bottom-app-name: 32px;

    --_animation-app-name: slideInLeft var(--telekom-motion-duration-animation)
        forwards,
      appear var(--telekom-motion-duration-animation) forwards;
  }

  :host::part(scrolled-back) {
    --_display-bottom-app-name: block;

    --_animation-app-name: slideOutLeft var(--telekom-motion-duration-animation)
        forwards,
      disappear var(--telekom-motion-duration-animation) forwards;
  }
}

@media screen and (--xl) {
  :host,
  :host::part(scrolled-back) {
    --_height: 96px;
    --_height-logo: 48px;
    --_height-top-bar: 30px;
    --_height-bottom-bar: 66px;

    --_spacing-x: 0 24px;
    --_spacing-left-body: 96px;
  }

  :host::part(scrolled),
  :host::part(scrolled-back) {
    --_spacing-x: 0 24px;
    --_spacing-left-body: 96px;
  }
}

@media screen and (--2xl) {
  :host,
  :host::part(scrolled-back) {
    --_height: 120px;
    --_height-logo: 60px;
    --_height-top-bar: 30px;
    --_height-bottom-bar: 90px;

    --_spacing-x: 0 96px 0 120px;
    --_spacing-left-body: 72px;
  }
  :host::part(scrolled),
  :host::part(scrolled-back) {
    --_spacing-x: 0 96px 0 120px;
    --_spacing-left-body: 72px;
  }
}

/* TODO not sure if we're actually gonna need this */
/* ::slotted(*) {
  height: 100%;
  display: inline-flex;
} */

slot[name='logo'] {
  height: var(--_height);
  width: var(--_height);
  background: var(--background-logo);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}

slot[name='meta-nav-external'] {
  display: var(--_display-meta-nav-external);
  flex: 1;
}
slot[name='meta-nav'] {
  display: var(--_display-meta-nav);
  /* TODO inline margin */
}
slot[name='lang-switcher'] {
  display: var(--_display-lang-switcher);
  /* TODO inline margin */
}

slot[name='main-nav'] {
  display: var(--_display-main-nav);
  flex: 1;
}
slot[name='functions'] {
  display: block;
  /* TODO inline margin */
}

:host::part(base) {
  height: var(--_height);
  background-color: var(--background);
  box-shadow: var(--shadow);
  position: fixed;
  top: 0;
  width: 100%;
  transition: var(--transition);
}

:host::part(container) {
  margin: var(--_spacing-x);
  display: flex;
}

:host::part(app-logo) {
  height: var(--_height);
  width: var(--_height);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}

/* targeting `scale-logo` */
:host::part(logo-svg) {
  height: var(--_height-logo);
  transition: var(--transition);
}

/* targeting `scale-logo` */
:host::part(logo) {
  height: calc(var(--_height) - 6px);
  width: calc(var(--_height) - 6px);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}

:host::part(body) {
  display: block;
  flex: 1; /* used to be width: 100% */
  margin-left: var(--_spacing-left-body);
}

:host::part(top-bar) {
  height: var(--_height-top-bar);
  display: flex;
  align-items: end;
  width: 100%;
  transition: var(--transition);
}

:host::part(top-app-name) {
  display: var(--_display-top-app-name);
  margin-right: var(--_spacing-right-top-app-name);
  transition: var(--transition);
}

:host::part(top-body) {
  display: inline-flex;
  flex: 1;
}

:host::part(bottom-bar) {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

:host::part(bottom-app-name) {
  display: var(--_display-bottom-app-name);
  animation: var(--_animation-app-name);
  margin-right: var(--_spacing-right-bottom-app-name);
  transition: var(--transition);
}

:host::part(bottom-body) {
  justify-content: var(--_base-menu-justify-content);
  height: var(--_height-bottom-bar);
  display: inline-flex;
  flex: 1;
  transition: var(--transition);
}

[part~='top-app-name'] > *,
[part~='bottom-app-name'] > * {
  font-size: var(--font-size-app-name);
  font-weight: var(--font-weight-app-name);
  line-height: var(--line-height-app-name);
  color: var(--telekom-color-text-and-icon-primary-standard);
  letter-spacing: 0.02em;
  text-decoration: none;
}

[part~='top-app-name'] > *:hover,
[part~='bottom-app-name'] > *:hover {
  color: var(--telekom-color-text-and-icon-primary-hovered);
}

[part~='top-app-name'] > *:active,
[part~='bottom-app-name'] > *:active {
  color: var(--telekom-color-text-and-icon-primary-pressed);
}

/* --- Keyframes --- */

@keyframes slideInLeft {
  0% {
    transform: translateX(-150px);
  }
  30% {
    transform: translateX(-150px);
  }
  100% {
    transform: translateX(0px);
  }
}
@keyframes slideOutLeft {
  0% {
    transform: translateX(0px);
  }
  30% {
    transform: translateX(0px);
  }
  100% {
    transform: translateX(-150px);
  }
}
@keyframes appear {
  0% {
    opacity: 0;
    visibility: hidden;
    max-width: 0;
  }
  30% {
    opacity: 0;
    visibility: hidden;
    max-width: 150px;
  }
  100% {
    opacity: 1;
    visibility: visible;
    max-width: 150px;
  }
}
@keyframes disappear {
  0% {
    opacity: 1;
    visibility: visible;
    max-width: 150px;
  }
  30% {
    visibility: visible;
    max-width: 150px;
  }
  50% {
    opacity: 0;
  }
  100% {
    opacity: 0;
    visibility: hidden;
    max-width: 0;
  }
}
