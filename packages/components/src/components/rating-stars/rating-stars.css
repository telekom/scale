/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

:host {
  --scl-stars-color: var(--scl-color-primary);
  --scl-stars-hover-color: var(--scl-color-primary-hover);
  --scl-stars-active-color: var(--scl-color-primary-active);
  --scl-stars-placeholder-color: var(--scl-color-black);
  --scl-stars-placeholder-revert-color: var(--scl-color-black);
  --scl-stars-disabled-color: var(--scl-color-grey-50);
  --scl-stars-spacing: var(--scl-spacing-2);

  display: inline-flex;
  flex-direction: column;
}

[part='wrapper']:hover .icon-clip {
  --decimal-width: 100% !important;
}

[part='range-slider'] {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  opacity: 0;
}

[part='wrapper'] {
  border-radius: var(--scl-spacing-4);
  display: inline-flex;
  margin-left: calc(-1 * var(--scl-stars-spacing));
}

[part='wrapper']:hover [part='star'] [part='selected-star'] {
  opacity: 1;
}

[part='star'] > * {
  /* prevent event bubbling for icons  */
  pointer-events: none;
}

[part='label'] {
  white-space: nowrap;
}

[part='star'] {
  --decimal-width: 100%;

  display: inline-flex;
  position: relative;
  color: var(--scl-stars-color);
  cursor: pointer;
  border: var(--scl-stars-spacing) solid transparent;
  border-top: 0;
  border-bottom: 0;
}

[part='placeholder-star'] {
  display: inline-flex;
  color: var(--scl-stars-placeholder-color);
  transition: color 0.1s ease-in-out;
}

[part='selected-star'] {
  opacity: 0;
  margin-left: 0px;
  position: relative;
  transition: opacity 0.1s ease-in-out;
}

.icon-clip {
  overflow: hidden;
  position: absolute;
  width: var(--decimal-width);
  height: 100%;
}

[part='star'][data-half] {
  --decimal-width: 50%;
}

/* selected state */

[part='star'][data-selected] {
  --scl-stars-placeholder-color: transparent;
}

[part='star'][data-half] {
  --scl-stars-placeholder-color: currentColor;
}

[part='star'][data-selected] [part='selected-star'] {
  opacity: 1;
}

/* hover states */

[part='wrapper']:hover {
  --scl-stars-color: var(--scl-stars-hover-color);
  --scl-stars-placeholder-color: transparent;
}

[part='wrapper']:hover [part='star'] {
  --decimal-width: 100%;
}

[part='wrapper']:hover [part='star'][data-half] {
  --scl-stars-placeholder-color: transparent;
}

[part='star']:hover ~ [part='star'] [part='selected-star'] {
  opacity: 0;
}

[part='star']:hover ~ [part='star'] [part='placeholder-star'] {
  --scl-stars-placeholder-color: var(--scl-stars-placeholder-revert-color);
}

/* active states */

[part='wrapper']:active {
  --scl-stars-color: var(--scl-stars-active-color);
  --scl-stars-placeholder-color: transparent;
}

/* focus states */

:host(:focus-within) [part='wrapper'],
[part='wrapper']:focus {
  box-shadow: 0 0 0 var(--scl-spacing-2) var(--scl-color-focus);
  outline: none;
}

/* readonly states */

:host([readonly]) [part='wrapper'] {
  pointer-events: none;
}

/* disabled states */

:host([disabled]) [part='wrapper'] {
  --scl-stars-color: var(--scl-stars-disabled-color);
  --scl-stars-placeholder-color: var(--scl-stars-disabled-color);

  pointer-events: none;
}
