import { Meta, ArgsTable, Story, Canvas } from '@storybook/addon-docs';
import TelekomHeader from './TelekomHeader.vue';
import TelekomHeaderDataBackCompat from './TelekomHeaderDataBackCompat.vue';
import TelekomProfileMenu from "./TelekomProfileMenu.vue";
import TelekomHeaderTemplate from './TelekomHeaderTemplate.vue';
import {
  mainNavigation,
  iconNavigation,
  addonNavigation,
  sectorNavigation,
  userNavigation,
} from './fixtures';

<Meta
  title="Components/Telekom Brand Header & Navigation"
  component={TelekomHeader}
  argTypes={{
    appNameLink: {
      control: {
        type: 'text',
      },
    },
    appName: {
      control: {
        type: 'text',
      },
    },
    appNameClick: {
      control: {
        type: 'disabled',
      },
      description: 'app name click event handler custom function',
    },
    storyName: {
      table: {
        disable: true,
      },
    },
  }}
/>

<div
  style={{
    display: 'inline-flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    width: '100%',
  }}
>
  <h1>Telekom Brand Header & Navigation</h1>
  <img src="assets/aa.png" alt="Accessible AA" />
</div>

export const Template = (args, { argTypes }) => ({
  components: { TelekomHeaderTemplate },
  props: {
    ...TelekomHeaderTemplate.props,
    storyName: String,
    // TODO remove these from here since they're included already in TelekomHeaderTemplate
    mainNavAriaLabel: 'Main Navigation',
    metaNavAriaLabel: 'Meta Navigation',
    metaNavExternalAriaLabel: 'External Meta Navigation',
    langSwitcherAriaLabel: 'Language Switcher',
  },
  template: `
    <TelekomHeaderTemplate
      :story-name="storyName"
      :app-name="appName"
      :app-name-link="appNameLink"
      :logo-href="logoHref"
      :logo-title="logoTitle"
      :logo-hide-title="logoHideTitle"
      :meta-nav-aria-label="metaNavAriaLabel"
      :meta-nav-external-aria-label="metaNavExternalAriaLabel"
      :lang-switcher-aria-label="langSwitcherAriaLabel"
      :main-nav-aria-label="mainNavAriaLabel"
    />
  `,
});

export const TemplateProfileMenu = (args, { argTypes }) => ({
  components: { TelekomProfileMenu },
  props: TelekomProfileMenu.props,
  template: `
    <div class="wrapper">
      <scale-telekom-app-shell>
        <scale-telekom-header slot="header">
          <scale-telekom-nav-list variant="functions" slot="functions" alignment="right" aria-label="Functions Menu" role="none">
            <telekom-profile-menu
              :app-name="appName"
              :label="label"
              :accessibility-label="accessibilityLabel"
              :close-menu-accessibility-label="closeMenuAccessibilityLabel"
              :service-name="serviceName"
              :service-description="serviceDescription"
              :login-label="loginLabel"
              :login-help-label="loginHelpLabel"
              :register-headline="registerHeadline"
              :register-label="registerLabel"
              :login-settings-label="loginSettingsLabel"
              :logout-label="logoutLabel"
              :logged-in="loggedIn"
              :user-info="userInfo"
              :service-links="serviceLinks"
              :login-url="loginUrl"
              :login-help-url="loginHelpUrl"
              :register-url="registerUrl"
              :login-settings-url="loginSettingsUrl"
              :hide-login-settings="hideLoginSettings"
              :logout-url="logoutUrl"
            ></telekom-profile-menu>
          </scale-telekom-nav-list>
        </scale-telekom-header>
      </scale-telekom-app-shell>
    </div>
  `,
});

## Standard Header

<Canvas withSource="none">
  <Story
    name="Standard Header"
    args={{ storyName: 'StoryStandard' }}
    inline={false}
    height={500}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Standard Header" />

### Main components

- [`scale-telekom-app-shell`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-app-shell)
- [`scale-telekom-header`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-header)

### Subcomponents

- [`scale-telekom-nav-list`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-nav-list)
- [`scale-telekom-nav-item`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-nav-item)
- [`scale-telekom-nav-flyout`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-nav-flyout)
- [`scale-telekom-mega-menu`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-mega-menu)
- [`scale-telekom-mega-menu-column`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-mega-menu)
- [`scale-telekom-mobile-flyout-canvas`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-mobile-flyout-canvas)
- [`scale-telekom-mobile-menu`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-mobile-menu)
- [`scale-telekom-mobile-menu-item`](https://github.com/telekom/scale/tree/main/packages/components/src/components/telekom/telekom-mobile-menu-item)

```html
<scale-telekom-header>
  <scale-telekom-nav-list slot="main-nav" aria-label="Main Navigation Links">
    <scale-telekom-nav-item aria-label="Topic One">
      <a href="#">Topic One</a>
    </scale-telekom-nav-item>
    <!-- … -->
  </scale-telekom-nav-list>
</scale-telekom-header>
```

### Scoped CSS variables

```css
scale-telekom-header {
  --shadow: 0px 2px 9px rgba(0, 0, 0, 0.15);
  --background: var(--telekom-color-background-surface);
  --background-logo: var(--telekom-color-primary-standard);
  --transition-common-scrolled: height var(--telekom-motion-duration-immediate)
      var(--telekom-motion-easing-standard),
    width var(--telekom-motion-duration-immediate),
    margin var(--telekom-motion-duration-immediate);
  --font-size-app-name: var(--telekom-typography-font-size-body);
  --line-height-app-name: var(--telekom-typography-line-spacing-tight);
  --font-weight-app-name: var(--telekom-typography-font-weight-extra-bold);
}

scale-telekom-nav-list {
  --width: 100%;
  --height: 100%;
  --spacing-x-start: 0;
  --flex-direction: row;
}

scale-telekom-nav-item {
  --focus-outline: var(--telekom-line-weight-highlight) solid
    var(--telekom-color-functional-focus-standard);
  --color: var(--telekom-color-text-and-icon-standard);
}
```

## Application Name

<Canvas withSource="none">
  <Story
    name="Application Name"
    args={{ storyName: 'StoryStandard', appName: 'Application Name' }}
    inline={false}
    height={500}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-telekom-header
  app-name="Application Name"
  app-name-link="https://example.com"
  meta-nav-aria-label="Meta navigation section"
  meta-nav-external-aria-label="External navigation section"
  lang-switcher-aria-label="Language switcher section"
  main-nav-aria-label="Main navigation"
  section
>
  <!-- … -->
</scale-telekom-header>
```

## Mega Menu

<Canvas withSource="none">
  <Story
    name="Mega Menu"
    args={{ storyName: 'StoryMegaMenu', appName: 'Application Name' }}
    inline={false}
    height={500}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-telekom-header
  meta-nav-aria-label="Meta navigation section"
  meta-nav-external-aria-label="External navigation section"
  lang-switcher-aria-label="Language switcher section"
  main-nav-aria-label="Main navigation section"
>
  <scale-telekom-nav-list slot="main-nav" aria-label="Main Navigation Links">
    <scale-telekom-nav-item aria-label="Topic one">
      <button>Topic One</button>
      <scale-telekom-nav-flyout hover>
        <div>Flyout content</div>
      </scale-telekom-nav-flyout>
    </scale-telekom-nav-item>
    <!-- … -->
  </scale-telekom-nav-list>
</scale-telekom-header>
```

### Mega Menu

```html
<scale-telekom-mega-menu>
  <scale-telekom-mega-menu-column>
    <scale-icon-home-home slot="icon" size="20"></scale-icon-home-home>
    <a href="https://example.com" slot="heading">Second Level</a>
    <ul>
      <li><a href="https://example.com">Third Level</a></li>
      <li><a href="https://example.com">Third Level</a></li>
      <!-- … -->
    </ul>
  </scale-telekom-mega-menu-column>
</scale-telekom-mega-menu>
```

## Slim Header

<Canvas withSource="none">
  <Story
    name="Slim Header"
    args={{ storyName: 'StorySlim', appName: 'Application Name' }}
    inline={false}
    height={500}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-telekom-header
  app-name="Application Name"
  app-name-link="https://example.com"
  meta-nav-aria-label="Meta navigation section"
  meta-nav-external-aria-label="External navigation section"
  lang-switcher-aria-label="Language switcher section"
  main-nav-aria-label="Main navigation section"
>
  <!-- … -->
</scale-telekom-header>
```

## Subtle Header

<Canvas withSource="none">
  <Story
    name="Subtle Header"
    args={{ storyName: 'StorySubtle', appName: 'Application Name' }}
    inline={false}
    height={500}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-telekom-header
  app-name="Application Name"
  app-name-link="https://example.com"
  meta-nav-aria-label="Meta navigation section"
  meta-nav-external-aria-label="External navigation section"
  lang-switcher-aria-label="Language switcher section"
  main-nav-aria-label="Main navigation section"
>
  <!-- … -->
</scale-telekom-header>
```

## Profile Menu

Set the profile menu's `logged-in` property to `true` or `false` to switch between the two states:

### Logged out

<Canvas withSource="none">
  <Story
    name="Profile Menu / Logged out"
    args={{
      loginUrl: "https://www.telekom.de/todo/login",
      loginHelpUrl: "https://www.telekom.de/hilfe/telekom-login",
      registerUrl: "https://meinkonto.telekom-dienste.de/telekom/account/registration/assistant/userstatus.xhtml",
      loggedIn: false,
      appName: "Application",
      label: "Login",
      accessibilityLabel: "Login",
      closeMenuAccessibilityLabel: "Close menu",
      serviceName: "Customer Center",
      serviceDescription: "Manage your contracts, bills, usage overviews, settings, and more.",
      loginLabel: "Log in",
      loginHelpLabel: "Help logging in",
      registerHeadline: "Need an account?",
      registerLabel: "Register now",
      userInfo: JSON.stringify({
        name: 'Firstname Lastname',
        email: 'example@example.com',
      }),
      serviceLinks: JSON.stringify([
        {
          name: 'Service 1',
          href: 'https://www.telekom.de/service-1',
          icon: 't-product-measure-internet-speed',
        },
        {
          name: 'Service 2',
          href: 'https://www.telekom.de/service-2',
          icon: 'communication-mail-opened',
        }
      ])
    }}
    inline={false}
    height={500}
  >
    {TemplateProfileMenu.bind({})}
  </Story>
</Canvas>

#### deutsche Version

```html
<scale-telekom-header>
  <!-- ... -->
  <scale-telekom-nav-list variant="functions" slot="functions" alignment="right" aria-label="Functions Menu" role="none">
    <!-- login-url: dynamic link - OpenID connect discovery -->
    <scale-telekom-profile-menu
      login-url="https://www.telekom.de/todo/login"
      login-help-url="https://www.telekom.de/hilfe/telekom-login"
      register-url="https://meinkonto.telekom-dienste.de/telekom/account/registration/assistant/userstatus.xhtml"
      logged-in="false"
      app-name="Application"
      label="Login"
      accessibility-label="Login"
      close-menu-accessibility-label="Menü schließen"
      service-name="Kundencenter"
      service-description="Hier können Sie Ihre Verträge verwalten sowie Rechnungen, Verbrauchsanzeigen, Einstellungen und weitere Informationen im Blick behalten."
      login-label="Zum Login"
      login-help-label="Hilfe zum Login"
      register-headline="Noch kein Telekom Login?"
      register-label="Jetzt registrieren"
    ></scale-telekom-profile-menu>
  </scale-telekom-nav-list>
</scale-telekom-header>
```

#### English version

```html
<scale-telekom-header>
  <!-- ... -->
  <scale-telekom-nav-list variant="functions" slot="functions" alignment="right" aria-label="Functions Menu" role="none">
    <!-- login-url: dynamic link - OpenID connect discovery -->
    <scale-telekom-profile-menu
      login-url="https://www.telekom.de/todo/login"
      login-help-url="https://www.telekom.de/hilfe/telekom-login"
      register-url="https://meinkonto.telekom-dienste.de/telekom/account/registration/assistant/userstatus.xhtml"
      logged-in="false"
      app-name="Application"
      label="Login"
      accessibility-label="Login"
      close-menu-accessibility-label="Close menu"
      service-name="Customer Center"
      service-description="Manage your contracts, bills, usage overviews, settings, and more."
      login-label="Log in"
      login-help-label="Help logging in"
      register-headline="Need an account?"
      register-label="Register now"
    ></scale-telekom-profile-menu>
  </scale-telekom-nav-list>
</scale-telekom-header>
```

### Logged in

<Canvas withSource="none">
  <Story
    name="Profile Menu / Logged in"
    args={{
      loginSettingsUrl: "https://www.telekom.de/todo/loginSettings",
      hideLoginSettings: false,
      logoutUrl: "https://www.telekom.de/todo/logout",
      loggedIn: true,
      appName: "Application",
      label: "Alexander",
      accessibilityLabel: "open user menu: Alexander",
      closeMenuAccessibilityLabel: "close menu",
      loginSettingsLabel: "Login Settings",
      logoutLabel: "Log out",
      userInfo: JSON.stringify({
        name: 'Alexander Dreyer',
        email: 'alexander.dreyer@t-online.de',
      }),
      serviceLinks: JSON.stringify([
        {
          name: 'My Account',
          href: 'https://www.telekom.de/mein-kundencenter',
          icon: 't-product-measure-internet-speed',
        },
        {
          name: 'E-Mail Center',
          href: 'https://www.telekom.de/e-mail/e-mail-center',
          icon: 'communication-mail-opened',
        },
        {
          name: 'MagentaTV',
          href: 'https://web.magentatv.de/EPG/',
          icon: 't-product-magenta-tv',
        },
        {
          name: 'MagentaSport',
          href: 'https://www.magentasport.de',
          icon: 't-product-telekom-1t1',
        },
        {
          name: 'MagentaCLOUD',
          href: 'https://magentacloud.de',
          icon: 'action-upload-to-cloud',
        },
        {
          name: 'MagentaHome Web',
          href: 'https://cockpit.telekom.net',
          icon: 'home-smarthome',
        }
      ])
    }}
    inline={false}
    height={650}
  >
    {TemplateProfileMenu.bind({})}
  </Story>
</Canvas>

#### deutsche Version

```html
<scale-telekom-header>
  <!-- ... -->
  <scale-telekom-nav-list variant="functions" slot="functions" alignment="right" aria-label="Functions Menu" role="none">
    <scale-telekom-profile-menu
      login-settings-url="https://idm.account.telekom.com/account-manager"
      hide-login-settings="false"
      logout-url="https://accounts.login.idm.telekom.com/sessionmessage/logout?post_logout_redirect_uri=$Target-URL"
      logged-in="true"
      app-name="Application"
      label="Alexander"
      accessibilityLabel="Benutzermenü öffnen: Alexander"
      close-menu-accessibility-label="Menü schließen"
      login-settings-label="Login-Einstellungen"
      logout-label="Logout"
      <!-- set user-info & service-links via script, see below -->
    ></scale-telekom-profile-menu>
  </scale-telekom-nav-list>
</scale-telekom-header>

<script>
let serviceLinks = [
  {
    name: 'Kundencenter',
    href: 'https://www.telekom.de/mein-kundencenter',
    icon: 't-product-measure-internet-speed',
  },
  {
    name: 'E-Mail Center',
    href: 'https://www.telekom.de/e-mail/e-mail-center',
    icon: 'communication-mail-opened',
  },
  {
    name: 'MagentaTV',
    href: 'https://web.magentatv.de/EPG/',
    icon: 't-product-magenta-tv',
  },
  {
    name: 'MagentaSport',
    href: 'https://www.magentasport.de',
    icon: 't-product-telekom-1t1',
  },
  {
    name: 'MagentaCLOUD',
    href: 'https://magentacloud.de',
    icon: 'action-upload-to-cloud',
  },
  {
    name: 'MagentaZuhause Web',
    href: 'https://cockpit.telekom.net',
    icon: 'home-smarthome',
  }
];

window.onload = () => {
  let profileMenu = document.querySelector('scale-telekom-profile-menu');

  profileMenu.userInfo = JSON.stringify({
    name: 'Alexander Dreyer',
    email: 'alexander.dreyer@t-online.de',
  });
  profileMenu.serviceLinks = JSON.stringify(serviceLinks);
};
</script>
```

#### English version

```html
<scale-telekom-header>
  <!-- ... -->
  <scale-telekom-nav-list variant="functions" slot="functions" alignment="right" aria-label="Functions Menu" role="none">
    <scale-telekom-profile-menu
      login-settings-url="https://idm.account.telekom.com/account-manager"
      hide-login-settings="false"
      logout-url="https://accounts.login.idm.telekom.com/sessionmessage/logout?post_logout_redirect_uri=$Target-URL"
      logged-in="true"
      app-name="Application"
      label="Alexander"
      accessibilityLabel="open user menu: Alexander"
      close-menu-accessibility-label="close menu"
      login-settings-label="Login Settings"
      logout-label="Log out"
      <!-- set user-info & service-links via script, see below -->
    ></scale-telekom-profile-menu>
  </scale-telekom-nav-list>
</scale-telekom-header>

<script>
let serviceLinks = [
  {
    name: 'My Account',
    href: 'https://www.telekom.de/mein-kundencenter',
    icon: 't-product-measure-internet-speed',
  },
  {
    name: 'E-Mail Center',
    href: 'https://www.telekom.de/e-mail/e-mail-center',
    icon: 'communication-mail-opened',
  },
  {
    name: 'MagentaTV',
    href: 'https://web.magentatv.de/EPG/',
    icon: 't-product-magenta-tv',
  },
  {
    name: 'MagentaSport',
    href: 'https://www.magentasport.de',
    icon: 't-product-telekom-1t1',
  },
  {
    name: 'MagentaCLOUD',
    href: 'https://magentacloud.de',
    icon: 'action-upload-to-cloud',
  },
  {
    name: 'MagentaHome Web',
    href: 'https://cockpit.telekom.net',
    icon: 'home-smarthome',
  }
];

window.onload = () => {
  let profileMenu = document.querySelector('scale-telekom-profile-menu');

  profileMenu.userInfo = JSON.stringify({
    name: 'Alexander Dreyer',
    email: 'alexander.dreyer@t-online.de',
  });
  profileMenu.serviceLinks = JSON.stringify(serviceLinks);
};
</script>
```


## Data API (Backward compatibility)

> This scale-telekom-header-data-back-compat component is only meant to make it easier to migrate from a [previous version of the Brand Header](?path=/usage/components-brand-header-navigation--standard). If you do not need to migrate, please avoid it. Learn more about the [expected data shape](https://github.com/telekom/scale/blob/main/packages/storybook-vue/stories/components/telekom-header-navigation/fixtures.js).

<Canvas withSource="none">
  <Story
    name="Data API"
    inline={false}
    height={500}
    args={{
      mainNavigation: JSON.stringify(mainNavigation),
      iconNavigation: JSON.stringify(iconNavigation),
      addonNavigation: JSON.stringify(addonNavigation),
      sectorNavigation: JSON.stringify(sectorNavigation),
      userNavigation: JSON.stringify(userNavigation),
      activeRouteId: 'Third Level 24',
      appName: 'Application Name',
    }}
  >
    {() => ({
      components: { TelekomHeaderDataBackCompat },
      props: TelekomHeaderDataBackCompat.props,
      template: `
        <div class="brand-header-spacing">
          <scale-telekom-header-data-back-compat
            :main-navigation="mainNavigation"
            :icon-navigation="iconNavigation"
            :sector-navigation="sectorNavigation"
            :user-navigation="userNavigation"
            :addon-navigation="addonNavigation"
            :active-route-id="activeRouteId"
            :app-name="appName"
          >
          </scale-telekom-header-data-back-compat>
        </div>
      `,
    })}
  </Story>
</Canvas>

```html
<scale-telekom-header-data-back-compat
  app-name="Application Name"
  app-name-link="https://example.com"
  active-route-id="id"
></scale-telekom-header-data-back-compat>

<script>
  const header = window.document.querySelector(
    'scale-telekom-header-data-back-compat'
  );
  header.mainNavigation = [...[]];
  header.iconNavigation = [...[]];
  header.sectorNavigation = [...[]];
  header.addonNavigation = [...[]];
</script>
```
