# Scale und Vue

Vue unterstützt problemlos Web Components.

Ein Beispiel für eine Boilerplate-App findest du im [GitHub Repository](https://github.com/telekom/scale/tree/main/examples).

## Setup

Installiere zuerst das Package:

```bash
npm install @telekom/scale-components
```

Lade danach die Komponenten-Library und das CSS in `main.js`:

```ts
import { defineCustomElements } from '@telekom/scale-components/loader';
import '@telekom/scale-components/dist/scale-components/scale-components.css';

// ...

defineCustomElements();
```

Um Vue den Umgang mit Benutzerdefinierte Elemente zu erleichtern, [ein bisschen Konfiguration ist nötig](https://v3.vuejs.org/guide/migration/custom-elements-interop.html#autonomous-custom-elements).

Für **Vue v2**:

```js
// main.js
Vue.config.ignoredElements = [/scale-\w*/];
```

Für **Vue v3**, setze `compilerOptions.isCustomElement`:

```js
// in vue.config.js (vue-cli)
chainWebpack: config => {
  config.module
    .rule('vue')
    .use('vue-loader')
      .tap(options => {
        // https://v3.vuejs.org/guide/migration/custom-elements-interop.html#autonomous-custom-elements
        options.compilerOptions = {
          isCustomElement: (tag) => tag.startsWith('scale-')
        }
        return options
      })
  }

// in webpack config
rules: [
  {
    test: /\.vue$/,
    use: 'vue-loader',
    options: {
      compilerOptions: {
        isCustomElement: (tag) => tag.startsWith('scale-'),
      },
    },
  },
  // ...
];

// or in main.js (on-the-fly template compilation)
const app = Vue.createApp({});
app.config.compilerOptions.isCustomElement = (tag) => tag.startsWith('scale-');
```

Nun solltest du in der Lage sein, Scale-Komponenten in deinen Templates zu verwenden:

```html
<div>
  <scale-button>Click!</scale-button>
</div>
```

## Events in Vue

Um Kollisionen mit Standard-Events zu vermeiden und für beste Kompatibilität mit anderen Libraries und Frameworks, werden die benutzerdefinierten Events, die von einigen Scale-Komponenten ausgegeben werden, mit dem Prefix `scale` gekennzeichnet. Event-Namen werden mit camelCase-Syntax geschrieben (z. B. scaleChange). Die Dokumentation zu diesen benutzerdefinierten Events findest du auf den jeweiligen Komponentenseiten im Abschnitt docs.

An Events mit dem Prefix `scale` kannst du reguläre Vue-Syntax anbinden:

```html
<scale-slider @scaleInput="handleInput"></scale-slider>
```

## Form Input Bindings

Das `v-model` Directive wird mit Benutzerdefinierte Elemente nicht funktionieren. Nur native Formularsteuerelemente wie `input` und `textarea` funktionieren.

Du kannst ganz einfach die gleichen Ergebnisse erzielen:

```html
<scale-text-field
  :value="example"
  @scaleChange="example = $event.target.value"
></scale-text-field>
```

## Proxy Package

Die automatisch generierten Proxy-Pakete sind veraltet und werden in v4 entfernt:

- `@telekom/scale-components-vue`
- `@telekom/scale-components-vue-neutral`
