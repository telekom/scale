import{r as s,h as t,H as i,g as r}from"./p-32539df4.js";import{c as e}from"./p-40a0fea8.js";import{s as a}from"./p-bf956c1d.js";
/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function n(s,t,i){return s<t?t:s>i?i:s}const o=(s,t,i)=>t.addEventListener(s,(s=>c(s,t,i))),l=(s,t,i)=>t.removeEventListener(s,(s=>c(s,t,i)));function h(s,t){"addListeners"===t?(o("keydown",s,"add"),o("keyup",s,"add"),o("mousedown",s,"remove"),o("mouseup",s,"remove")):"removeListeners"===t&&(l("keydown",s,"add"),l("keyup",s,"add"),l("mousedown",s,"remove"),l("mouseup",s,"remove"))}function c(s,t,i){"add"===i?["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageDown","PageUp"].includes(s.key)&&t.classList.add("rating-focus"):"remove"===i&&t.classList.remove("rating-focus")}const d=class{constructor(t){s(this,t),this.hoverValue=0,this.isHovering=!1,this.numOfStars=5,this.rating=0,this.small=!1,this.disabled=!1,this.ariaTranslation=`${this.rating} out of ${this.numOfStars} stars`,this.precision=1,this.colorFilled="var(--scl-color-primary)",this.colorBlank="var(--scl-color-grey-50)",this.size=this.small?"16px":"24px",this.getSymbol=(s,t,i)=>i?`<scale-icon-action-favorite color=${s} size=${t} selected />`:`<scale-icon-action-favorite color=${s} size=${t} />`}connectedCallback(){a({source:this.hostElement,tag:"beta"}),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseClick=this.handleMouseClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){h(this.element,"addListeners")}disconnectedCallback(){h(this.element,"removeListeners")}handleMouseLeave(){return this.isHovering=!1,!1}handleMouseEnter(){return this.isHovering=!0,!0}handleMouseMove(s){this.hoverValue=this.getValueFromMousePosition(s)}handleMouseClick(s){this.disabled||(this.isHovering=!1,this.rating=this.rating===this.hoverValue?0:this.getValueFromMousePosition(s))}handleKeyDown(s){this.disabled||("ArrowRight"===s.key&&(this.rating=n(this.rating+this.precision,0,this.numOfStars),s.preventDefault()),"ArrowLeft"===s.key&&(this.rating=n(this.rating-this.precision,0,this.numOfStars),s.preventDefault()),"Home"===s.key&&(this.rating=0,s.preventDefault()),"End"===s.key&&(this.rating=this.numOfStars,s.preventDefault()))}getValueFromMousePosition(s){const t=this.element.getBoundingClientRect().left,i=this.element.getBoundingClientRect().width;return n(this.roundToPrecision((s.clientX-t)/(i/(this.numOfStars/this.precision))*this.precision,this.precision),0,this.numOfStars)}roundToPrecision(s,t=1){const i=1/t;return Math.ceil(s*i)/i}getAriaLabel(){return this.ariaTranslation.replace(/\$\{x\}/gi,this.rating.toString()).replace(/\$\{y\}/gi,this.numOfStars.toString())}render(){const s=Array.from(Array(this.numOfStars).keys()),r=this.isHovering?this.hoverValue:this.rating;return t(i,null,t("div",{class:this.getCssClassMap(),id:"rating",ref:s=>this.element=s,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleMouseClick,onKeyDown:this.handleKeyDown,tabIndex:this.disabled?-1:0,role:"figure","aria-describedby":"rating__description","aria-label":this.label},t("label",{class:"rating__label","aria-hidden":"true"},this.label),t("span",{id:"rating__description",innerHTML:this.getAriaLabel(),hidden:!0}),t("span",{class:"rating__symbols","aria-hidden":"true"},s.map((s=>t("span",{class:"rating__symbol__wrapper",onMouseEnter:this.handleMouseEnter},t("span",{role:"presentation",style:{clipPath:Math.ceil(r)>=s+1?`inset(0 ${100*(Math.ceil(r)-s)}% 0 0)`:null},class:{rating__symbol:!0,"rating__symbol--hover":this.isHovering&&Math.ceil(r)===s+1},innerHTML:this.getSymbol(this.colorBlank,this.size),id:"star-"+(s+1)}))))),t("span",{class:"rating__symbols rating__symbols--indicator","aria-hidden":"true"},s.map((s=>t("span",{class:"rating__symbol__wrapper",onMouseEnter:this.handleMouseEnter},t("span",{role:"presentation",style:{clipPath:r>s+1?null:`inset(0 ${100-100*(r-s)}% 0 0)`},class:{rating__symbol:!0,"rating__symbol--hover":this.isHovering&&Math.ceil(r)===s+1},innerHTML:this.getSymbol(this.colorFilled,this.size,!0)})))))))}getCssClassMap(){return e("rating",this.disabled&&"rating--disabled",this.isHovering&&"rating--hover",this.small&&"rating--small",this.label&&"rating--has-label")}get hostElement(){return r(this)}};d.style=":host{--rating-spacing:0.125rem}.rating__label{position:absolute;bottom:var(--scl-spacing-32, 2rem)}.rating--disabled .rating__label{color:var(--scl-color-grey-50, #7c7c7c)}.rating--small .rating__label{bottom:var(--scl-spacing-24, 1.5rem)}.rating{position:relative;display:inline-flex}.rating--has-label{margin-top:var(--scl-spacing-24, 1.5rem)}.rating:focus{outline:none}.rating-focus:focus{outline:-webkit-focus-ring-color auto 1px}.rating__symbols{display:inline-flex;position:relative;cursor:pointer}.rating__symbols--indicator{position:absolute;top:0;left:0;pointer-events:none}.rating__symbol{display:flex}.rating--disabled .rating__symbols{cursor:default}.rating--hover [selected] path{fill:var(--scl-color-primary-hover, #f80983)}.rating:active [selected] path{fill:var(--scl-color-primary-active, #f80983)}.rating.rating--disabled [selected] path{fill:var(--scl-color-grey-50, #7c7c7c)}.rating__symbol__wrapper{display:flex;padding:0 var(--rating-spacing, 0.125rem)}.rating__symbol__wrapper:first-of-type{padding-left:0}.rating__symbol__wrapper:last-of-type{padding-right:0}";export{d as scale_rating_stars}